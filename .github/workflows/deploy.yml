name: Deploy to production

on:
  push:
    branches: [ actions ]
  workflow_dispatch:

jobs:
  deployment:
    runs-on: ubuntu-latest
    environment: production
  
    steps:
    - name: SSH Remote Commands
      uses: appleboy/ssh-action@v0.1.5
      with:
        # Proxy
        # proxy_host : ${{secrets.PROXY_HOST}}
        # proxy_port : ${{secrets.PROXY_PORT}}
        # proxy_username : ${{secrets.PROXY_USER}}
        # proxy_passphrase: ${{secrets.PROXY_PASSPHRASE}}
        # proxy_key: ${{secrets.PROXY_KEY}}
        
        # Serveur web
        host: ${{secrets.PROXY_HOST}}
        port : ${{secrets.PROXY_PORT}}
        username : ${{secrets.PROXY_USER}}
        key: ${{secrets.PROXY_KEY}}
        passphrase: ${{secrets.PROXY_PASSPHRASE}}

        debug: true

        script: whoami